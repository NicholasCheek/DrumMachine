<html>
    <head>
        <link href='style.css' rel='stylesheet' type='text/css'>
        <link href="https://fonts.googleapis.com/css?family=Orbitron&display=swap" rel="stylesheet">
    </head>
    <body>
        <h1>drum machine</h1>
        <div class='keys'>
            <div class=key data-key='81'>
                <p>Q</p>
            </div>
            <div class='key' data-key='87'>
                <p>W</p>
            </div>
            <div class='key' data-key="69">
                <p>E</p>
            </div>
            <div class='key' data-key='65'>
                <p>A</p>
            </div>
            <div class='key' data-key="83">
                <p>S</p>
            </div>
            <div class='key' data-key="68">
                <p>D</p>
            </div>
            <div class="key" data-key="90">
                <p>Z</p>
            </div>
            <div class='key' data-key='88'>
                <p>X</p>
            </div>
            <div class='key' data-key="67">
                <p>C</p>
            </div>
        </div>

        <audio data-key='81' src='clap.wav'></audio>
        <audio data-key='87' src='hihat.wav'></audio>
        <audio data-key='69' src='kick.wav'></audio>
        <audio data-key='65' src='openhat.wav'></audio>
        <audio data-key='83' src='boom.wav'></audio>
        <audio data-key='68' src='ride.wav'></audio>
        <audio data-key='90' src='tink.wav'></audio>
        <audio data-key='88' src='tom.wav'></audio>
        <audio data-key='67' src='snare.wav'></audio>

        <script>
            function playSound(e) {
                const audio = document.querySelector(`audio[data-key='${e.keyCode}']`);
                const key = document.querySelector(`.key[data-key='${e.keyCode}']`);                
                if(!audio) return;
                audio.currentTime = 0;
                audio.play();
                key.classList.add('playing')
            };

            function removeTransition(e) {
                if (e.propertyName !== 'transform') return;
                this.classList.remove('playing');
            };

            const keys = document.querySelectorAll('.key');
            keys.forEach(key => key.addEventListener('transitionend', removeTransition));
            document.addEventListener('keydown', playSound);
        </script>
    </body>
</html>

